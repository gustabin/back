package ar.com.santanderrio.obp.servicios.prestamos.dao;

import org.junit.Assert;
import org.junit.Ignore;
import org.junit.Test;
import org.mockito.Matchers;
import org.mockito.Mockito;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.support.AnnotationConfigContextLoader;

import ar.com.santanderrio.obp.base.dao.DAOException;
import ar.com.santanderrio.obp.base.iatx.entities.IatxException;
import ar.com.santanderrio.obp.iatx.IatxBaseDAOTest;
import ar.com.santanderrio.obp.iatx.IatxMatcher;
import ar.com.santanderrio.obp.servicios.clientes.entities.Cliente;
import ar.com.santanderrio.obp.servicios.cuentas.entities.Cuenta;
import ar.com.santanderrio.obp.servicios.prestamos.entity.DeudaPrestamoEntity;
import ar.com.santanderrio.obp.servicios.tarjetas.entities.ClienteMock;
import ar.com.santanderrio.obp.servicios.tarjetas.entities.CuentaMock;

/**
 * The Class CuotasPrestamoDAOTest.
 */
@ContextConfiguration(loader = AnnotationConfigContextLoader.class, classes = {
        CuotasPrestamoDAOTest.CuotasPrestamoDAOTestConfiguration.class })
public class CuotasPrestamoDAOTest extends IatxBaseDAOTest {

    /** The cuotas prestamo dao. */
    @Autowired
    CuotasPrestamoDAO cuotasPrestamoDao;

    /**
     * The Class CuotasPrestamoDAOTestConfiguration.
     */
    @Configuration
    @ComponentScan(basePackages = { "ar.com.santanderrio.obp.servicios.prestamos.dao" })
    public static class CuotasPrestamoDAOTestConfiguration {

    }

    /**
     * Consultar proximas cuotas ok.
     *
     * @throws IatxException
     *             the iatx exception
     * @throws DAOException
     *             the DAO exception
     */
    @Ignore
    @Test
    public void consultarProximasCuotasOk() throws IatxException, DAOException {
        String servicio = "CNSPTMODEU";
        String version = "110";
        String tramaResponse = "200000000000P04HTML0009900010300LMPN98  ********00581929000000102017032716341100000000IBF24679000000000000CNSPTMODEU1100000            00125398    00        00 000000000201703271634040000000000                            0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000DHõ0264000000000õARSõPESO ARGENTINO      õ00õ0001-01-01õ00õ0001-01-01õ014500000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000001290433800+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000001290433800+õ006õ2017-04-08õ00082õ014500000+õ00000000013784300+õ00000000015592700+õ00000000000000000+õ00000000000000000+õ00000000001643600+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000031020600+õ00000001290433800õ000000000õ00000000000000000+õ00000000000000000+õ00000000000000000+õ000000000õ    õ00000001276649500+õ015504900õ015920000õ015920000õ2017-05-08õ00083õ014500000+õ00000000013950800+õ00000000015426200+õ00000000000000000+õ00000000000000000+õ00000000001599400+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000030976400+õ00000001276649500õ000000000õ00000000000000000+õ00000000000000000+õ00000000000000000+õ000000000õ    õ00000001262698700+õ015504900õ015920000õ015920000õ2017-06-08õ00084õ014500000+õ00000000014119400+õ00000000015257600+õ00000000000000000+õ00000000000000000+õ00000000001621300+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000030998300+õ00000001262698700õ000000000õ00000000000000000+õ00000000000000000+õ00000000000000000+õ000000000õ    õ00000001248579300+õ015504900õ015920000õ015920000õ2017-07-08õ00085õ014500000+õ00000000014290000+õ00000000015087000+õ00000000000000000+õ00000000000000000+õ00000000001577500+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000030954500+õ00000001248579300õ000000000õ00000000000000000+õ00000000000000000+õ00000000000000000+õ000000000õ    õ00000001234289300+õ015504900õ015920000õ015920000õ2017-08-08õ00086õ014500000+õ00000000014462700+õ00000000014914300+õ00000000000000000+õ00000000000000000+õ00000000001598400+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000030975400+õ00000001234289300õ000000000õ00000000000000000+õ00000000000000000+õ00000000000000000+õ000000000õ    õ00000001219826600+õ015504900õ015920000õ015920000õ2017-09-08õ00087õ014500000+õ00000000014637400+õ00000000014739600+õ00000000000000000+õ00000000000000000+õ00000000001586800+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000030963800+õ00000001219826600õ000000000õ00000000000000000+õ00000000000000000+õ00000000000000000+õ000000000õ    õ00000001205189200+õ015504900õ015920000õ015920000õ";
        Cliente cliente = ClienteMock.completarInfoCliente();
        Cuenta cuenta = CuentaMock.completarInfoCuenta();

        Mockito.when(iatxSender.send(Matchers.argThat(new IatxMatcher(servicio, version)))).thenReturn(tramaResponse);

        DeudaPrestamoEntity deudaPrestamoEntity = cuotasPrestamoDao.consultarProximasCuotas(cliente, cuenta);

        Assert.assertNotNull(deudaPrestamoEntity);
    }

    /**
     * Consultar proximas cuotas DAO exception.
     *
     * @throws IatxException
     *             the iatx exception
     * @throws DAOException
     *             the DAO exception
     */
    @Ignore
    @Test(expected = DAOException.class)
    public void consultarProximasCuotasDAOException() throws IatxException, DAOException {
        String servicio = "CNSPTMODEU";
        String version = "110";
        String tramaResponse = "200000000000P04HTML0009900010302GLQG47  ********00342928000000402017120411400400000000IBF00474000000000000CNSPTMODEU1100000            02616647    00        00 000000000201712041139520000000000                            0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000DHõ0445300000000õARSõPESO ARGENTINO      õ00õ2014-10-08õ00õ0001-01-01õ034000000+õ00000000041550800+õ00000000012754300+õ00000000000000000+õ00000000000000000+õ00000000000689700+õ00000000000992300+õ00000000000000000+õ00000000005406700+õ00000000010813300+õ00000000072207100+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ012õ2016-05-10õ00019õ034000000+õ00000000001681000+õ00000000001177300+õ00000000000000000+õ00000000000000000+õ00000000000062700+õ00000000000096000+õ00000000000000000+õ00000000000465400+õ00000000000930700+õ00000000004413100+õ00000000041550800õ000000000õ00000000000000000+õ00000000000000000+õ00000000000000000+õ000000000õ    õ00000000039869800+õ2016-06-10õ00020õ034000000+õ0000000000õ06220õ+õ00000000õ00092600+õ00000000õ00000000+õ00000000õ00452100+õ00000000õ00904200+õ00000000õ04369400+õ00000000õ39869800õ000000000õ00000000000000000+õ00000000000000000+õ00000000000000000+õ000000000õ    õ000õ0000038141100+õ20õ6-07-10õ0õ021õ034000000+õ000õ0000001777600+õ000õ0000001080700+õ000õ000000000õ000+õ00000000000000000+õ0000000000õ05760õ+õ00000000õ04315500+õõ00000õ0038141100õ000000000õ00000000õ00000000+õ00000000õ00000000+õ00000000õ00000000+õ00000000õõ    õ000000000363õ3500+õ2016-08-10õ0õ022õ034000000+õ000õ0000001828000+õ000õ0000001030300+õ000õ0000000000000+õ000õ0000000000000+õ00õ000000000õ6700+õ000000000000õ3200+õ000000000000õ0000+õ000000000004õ2200+õ000õ0000õ00844400+õ00000000õ04264800+õõ00000õ0036363500õõ    õ0000õ00003õ535500+õ20õ6-09-10õ00023õ0340õ0000+õ000000000018õ9800+õ000000000009õ8500+õ000000000000õ0000+õ000000000000õ0000+õ000000000000õ3900+õ000000000000õ8300+õ000000000000õ0000+õ000000000004õ5300+õ000000000008õ0600+õ00000000004õ06400+õ00õ00000034535500õ000õ00000õ000000000000õ0000+õ000000000000õ0000+õ000õ0000õ00000000+õ00000000õõ    õ0000õ00003õ655700+õ20õ0000+õ0000õ00000õ000000+õ00õ00000000049300+õ00õ00000000072300+õ00õ00000000000000+õ00õ00000000387800+õ00õ00000000775600+õ00õ00000004143300+õ00õ00000032655700õ000õ00000õ000000000000õ0000+õ000000000000õ0000+õ000000000000õ0000+õ000000000õ õ  õ000000õ0030722600+õ2016-1õ-10õ00025õ03400000õ+õ0000000000198780õ+õ0000000õ0008õ0500+õ000000000000õ0000+õ0000õ00000õ000000+õ00õ0000000073õ600+õõ0000000004õ81100+õ00000000030õ22600õ000000000õ00õ00000000000000+õ00õ00000000000000+õ00õ00000000000000+õ00õ000000õ    õ000000õ0028734800+õ2016-1õ-10õ00026õ03400000õ+õ0000000000204410õ+õ0000000000081420õ+õ000000000000000õ0+õ000000õ0000000000+õ000000õ0000043400+õ000000õ0000062500+õ000000õ000000000õ+õ00õ00000000349000+õ00õ0000000069õ100+õõ0000000004õ0000000000õ000+õõ00000000õ õ  õ000000000266907õ0+õ2017-01-10õ0002õõ034000000+õ000000õ0002102100+õ000000õ0000756200+õ000000õ0000000000+õ000000õ0000000000+õ000000õ0000041600+õ000000õ0000058500+õ000000õ0000000000+õ000000õ0000327500+õ00000õ000006550õ0+õ000000000039409õ0+õ000000000266907õ0õ000000000õ000000õ000000000õ+õ00õ00000000000000+õ00õ0000000000õ000+õõ00000000õ õ0000696700õõ0000õ0000000000õ0+õ000000000000000õ0+õ000000000000384õ0+õ000000000000534õ0+õ000000000000000õ0+õ000000000003043õ0+õ000000000006086õ0+õ000000000038630õ0+õ000000000245886õ0õ000000000õ000000õ0000000000+õ000000õ0000000000+õ00000õ000000000õ0+õ000000000õ    õõ0000000022427000+õõ017-03-10õ00029õ03õ000000+õ0õ0000õ0002222900+õ000000õ0000635400õõ0000õ0000000000õ0+õ0000000õ00028õ500+õ00000õ00000564900+õ00000õ00003783500+õ00000õ00022427000õ000000õ00õ000000000000000õ0+õ000000000000000õ0+õ000000000000000õ0+õ000000000õ    õõ0000000020204100+õõ017-04-10õ00030õ03õ000000+õ0000000000õ285900+õ000000000õ0572400+õõ0000000000000000+õõ0000000000000000+õõ0000000000031500+õõ000000000õ0432õ0+õ000000000000000õ0+õ0000000õ00025õ900+õ00000õ0+õ0000000õ00000õ000+õ00000õ00000000000+õ00000õ000õ    õ000000000õ7918200+õ         õ                  õ                  õ                  õ                  õ                  õ                  õ                  õ                 õ         õ                  õ                  õ                  õ         õ    õ                  õ          õ     õ          õ012õ2016-0õ-10õ0õ019õ034000õ00+õ00000000001681õ00+õ00000000001177õ00+õ00000000000000õ00+õ00000000000000õ00+õ00000000000062õ00+õ00000000000096õ00+õ00000000000000õ00+õ00000000000465õ00+õ00000000000930õ00+õ00000000004413õ00+õ0000000004155õ800õ00000õ000õ00000000000000õ00+õ00000000000000õ00+õ00000000000000õ00+õ00000õ000õõ   õ00000000039869õ00+õ2016-0õ-10õ0õ020õ034000õ  ********00581929000000102017032716341100000000IBF24679000000000000CNSPTMODEU1100000            00125398    00        00 000000000201703271634040000000000                            0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000DHõ0264000000000õARSõPESO ARGENTINO      õ00õ0001-01-01õ00õ0001-01-01õ014500000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000001290433800+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000001290433800+õ006õ2017-04-08õ00082õ014500000+õ00000000013784300+õ00000000015592700+õ00000000000000000+õ00000000000000000+õ00000000001643600+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000031020600+õ00000001290433800õ000000000õ00000000000000000+õ00000000000000000+õ00000000000000000+õ000000000õ    õ00000001276649500+õ015504900õ015920000õ015920000õ2017-05-08õ00083õ014500000+õ00000000013950800+õ00000000015426200+õ00000000000000000+õ00000000000000000+õ00000000001599400+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000030976400+õ00000001276649500õ000000000õ00000000000000000+õ00000000000000000+õ00000000000000000+õ000000000õ    õ00000001262698700+õ015504900õ015920000õ015920000õ2017-06-08õ00084õ014500000+õ00000000014119400+õ00000000015257600+õ00000000000000000+õ00000000000000000+õ00000000001621300+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000030998300+õ00000001262698700õ000000000õ00000000000000000+õ00000000000000000+õ00000000000000000+õ000000000õ    õ00000001248579300+õ015504900õ015920000õ015920000õ2017-07-08õ00085õ014500000+õ00000000014290000+õ00000000015087000+õ00000000000000000+õ00000000000000000+õ00000000001577500+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000030954500+õ00000001248579300õ000000000õ00000000000000000+õ00000000000000000+õ00000000000000000+õ000000000õ    õ00000001234289300+õ015504900õ015920000õ015920000õ2017-08-08õ00086õ014500000+õ00000000014462700+õ00000000014914300+õ00000000000000000+õ00000000000000000+õ00000000001598400+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000030975400+õ00000001234289300õ000000000õ00000000000000000+õ00000000000000000+õ00000000000000000+õ000000000õ    õ00000001219826600+õ015504900õ015920000õ015920000õ2017-09-08õ00087õ014500000+õ00000000014637400+õ00000000014739600+õ00000000000000000+õ00000000000000000+õ00000000001586800+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000030963800+õ00000001219826600õ000000000õ00000000000000000+õ00000000000000000+õ00000000000000000+õ000000000õ    õ00000001205189200+õ015504900õ015920000õ015920000õ";
        Cliente cliente = ClienteMock.completarInfoCliente();
        Cuenta cuenta = CuentaMock.completarInfoCuenta();

        Mockito.when(iatxSender.send(Matchers.argThat(new IatxMatcher(servicio, version)))).thenReturn(tramaResponse);

        DeudaPrestamoEntity deudaPrestamoEntity = cuotasPrestamoDao.consultarProximasCuotas(cliente, cuenta);

        Assert.assertNotNull(deudaPrestamoEntity);
    }

    /**
     * Consultar proximas cuotas respuesta error cod retorno no valido.
     *
     * @throws IatxException
     *             the iatx exception
     * @throws DAOException
     *             the DAO exception
     */
    @Ignore
    @Test
    public void consultarProximasCuotasRespuestaErrorCodRetornoNoValido() throws IatxException, DAOException {
        String servicio = "CNSPTMODEU";
        String version = "110";
        String tramaResponse = "200000000000P04HTML0009900010302GLQG47  ********00342928000000402017120411400400000000IBF00474000000000000CNSPTMODEU1100000            02616647    00        00 000000000201712041139520000000000                            0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000DHõ04453-1õARSõPESO ARGENTINO      õ00õ2014-10-08õ00õ0001-01-01õ034000000+õ00000000041550800+õ00000000012754300+õ00000000000000000+õ00000000000000000+õ00000000000689700+õ00000000000992300+õ00000000000000000+õ00000000005406700+õ00000000010813300+õ00000000072207100+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ012õ2016-05-10õ00019õ034000000+õ00000000001681000+õ00000000001177300+õ00000000000000000+õ00000000000000000+õ00000000000062700+õ00000000000096000+õ00000000000000000+õ00000000000465400+õ00000000000930700+õ00000000004413100+õ00000000041550800õ000000000õ00000000000000000+õ00000000000000000+õ00000000000000000+õ000000000õ    õ00000000039869800+õ2016-06-10õ00020õ034000000+õ0000000000õ06220õ+õ00000000õ00092600+õ00000000õ00000000+õ00000000õ00452100+õ00000000õ00904200+õ00000000õ04369400+õ00000000õ39869800õ000000000õ00000000000000000+õ00000000000000000+õ00000000000000000+õ000000000õ    õ000õ0000038141100+õ20õ6-07-10õ0õ021õ034000000+õ000õ0000001777600+õ000õ0000001080700+õ000õ000000000õ000+õ00000000000000000+õ0000000000õ05760õ+õ00000000õ04315500+õõ00000õ0038141100õ000000000õ00000000õ00000000+õ00000000õ00000000+õ00000000õ00000000+õ00000000õõ    õ000000000363õ3500+õ2016-08-10õ0õ022õ034000000+õ000õ0000001828000+õ000õ0000001030300+õ000õ0000000000000+õ000õ0000000000000+õ00õ000000000õ6700+õ000000000000õ3200+õ000000000000õ0000+õ000000000004õ2200+õ000õ0000õ00844400+õ00000000õ04264800+õõ00000õ0036363500õõ    õ0000õ00003õ535500+õ20õ6-09-10õ00023õ0340õ0000+õ000000000018õ9800+õ000000000009õ8500+õ000000000000õ0000+õ000000000000õ0000+õ000000000000õ3900+õ000000000000õ8300+õ000000000000õ0000+õ000000000004õ5300+õ000000000008õ0600+õ00000000004õ06400+õ00õ00000034535500õ000õ00000õ000000000000õ0000+õ000000000000õ0000+õ000õ0000õ00000000+õ00000000õõ    õ0000õ00003õ655700+õ20õ0000+õ0000õ00000õ000000+õ00õ00000000049300+õ00õ00000000072300+õ00õ00000000000000+õ00õ00000000387800+õ00õ00000000775600+õ00õ00000004143300+õ00õ00000032655700õ000õ00000õ000000000000õ0000+õ000000000000õ0000+õ000000000000õ0000+õ000000000õ õ  õ000000õ0030722600+õ2016-1õ-10õ00025õ03400000õ+õ0000000000198780õ+õ0000000õ0008õ0500+õ000000000000õ0000+õ0000õ00000õ000000+õ00õ0000000073õ600+õõ0000000004õ81100+õ00000000030õ22600õ000000000õ00õ00000000000000+õ00õ00000000000000+õ00õ00000000000000+õ00õ000000õ    õ000000õ0028734800+õ2016-1õ-10õ00026õ03400000õ+õ0000000000204410õ+õ0000000000081420õ+õ000000000000000õ0+õ000000õ0000000000+õ000000õ0000043400+õ000000õ0000062500+õ000000õ000000000õ+õ00õ00000000349000+õ00õ0000000069õ100+õõ0000000004õ0000000000õ000+õõ00000000õ õ  õ000000000266907õ0+õ2017-01-10õ0002õõ034000000+õ000000õ0002102100+õ000000õ0000756200+õ000000õ0000000000+õ000000õ0000000000+õ000000õ0000041600+õ000000õ0000058500+õ000000õ0000000000+õ000000õ0000327500+õ00000õ000006550õ0+õ000000000039409õ0+õ000000000266907õ0õ000000000õ000000õ000000000õ+õ00õ00000000000000+õ00õ0000000000õ000+õõ00000000õ õ0000696700õõ0000õ0000000000õ0+õ000000000000000õ0+õ000000000000384õ0+õ000000000000534õ0+õ000000000000000õ0+õ000000000003043õ0+õ000000000006086õ0+õ000000000038630õ0+õ000000000245886õ0õ000000000õ000000õ0000000000+õ000000õ0000000000+õ00000õ000000000õ0+õ000000000õ    õõ0000000022427000+õõ017-03-10õ00029õ03õ000000+õ0õ0000õ0002222900+õ000000õ0000635400õõ0000õ0000000000õ0+õ0000000õ00028õ500+õ00000õ00000564900+õ00000õ00003783500+õ00000õ00022427000õ000000õ00õ000000000000000õ0+õ000000000000000õ0+õ000000000000000õ0+õ000000000õ    õõ0000000020204100+õõ017-04-10õ00030õ03õ000000+õ0000000000õ285900+õ000000000õ0572400+õõ0000000000000000+õõ0000000000000000+õõ0000000000031500+õõ000000000õ0432õ0+õ000000000000000õ0+õ0000000õ00025õ900+õ00000õ0+õ0000000õ00000õ000+õ00000õ00000000000+õ00000õ000õ    õ000000000õ7918200+õ         õ                  õ                  õ                  õ                  õ                  õ                  õ                  õ                 õ         õ                  õ                  õ                  õ         õ    õ                  õ          õ     õ          õ012õ2016-0õ-10õ0õ019õ034000õ00+õ00000000001681õ00+õ00000000001177õ00+õ00000000000000õ00+õ00000000000000õ00+õ00000000000062õ00+õ00000000000096õ00+õ00000000000000õ00+õ00000000000465õ00+õ00000000000930õ00+õ00000000004413õ00+õ0000000004155õ800õ00000õ000õ00000000000000õ00+õ00000000000000õ00+õ00000000000000õ00+õ00000õ000õõ   õ00000000039869õ00+õ2016-0õ-10õ0õ020õ034000õ  ********00581929000000102017032716341100000000IBF24679000000000000CNSPTMODEU1100000            00125398    00        00 000000000201703271634040000000000                            0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000DHõ0264000000000õARSõPESO ARGENTINO      õ00õ0001-01-01õ00õ0001-01-01õ014500000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000001290433800+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000001290433800+õ006õ2017-04-08õ00082õ014500000+õ00000000013784300+õ00000000015592700+õ00000000000000000+õ00000000000000000+õ00000000001643600+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000031020600+õ00000001290433800õ000000000õ00000000000000000+õ00000000000000000+õ00000000000000000+õ000000000õ    õ00000001276649500+õ015504900õ015920000õ015920000õ2017-05-08õ00083õ014500000+õ00000000013950800+õ00000000015426200+õ00000000000000000+õ00000000000000000+õ00000000001599400+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000030976400+õ00000001276649500õ000000000õ00000000000000000+õ00000000000000000+õ00000000000000000+õ000000000õ    õ00000001262698700+õ015504900õ015920000õ015920000õ2017-06-08õ00084õ014500000+õ00000000014119400+õ00000000015257600+õ00000000000000000+õ00000000000000000+õ00000000001621300+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000030998300+õ00000001262698700õ000000000õ00000000000000000+õ00000000000000000+õ00000000000000000+õ000000000õ    õ00000001248579300+õ015504900õ015920000õ015920000õ2017-07-08õ00085õ014500000+õ00000000014290000+õ00000000015087000+õ00000000000000000+õ00000000000000000+õ00000000001577500+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000030954500+õ00000001248579300õ000000000õ00000000000000000+õ00000000000000000+õ00000000000000000+õ000000000õ    õ00000001234289300+õ015504900õ015920000õ015920000õ2017-08-08õ00086õ014500000+õ00000000014462700+õ00000000014914300+õ00000000000000000+õ00000000000000000+õ00000000001598400+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000030975400+õ00000001234289300õ000000000õ00000000000000000+õ00000000000000000+õ00000000000000000+õ000000000õ    õ00000001219826600+õ015504900õ015920000õ015920000õ2017-09-08õ00087õ014500000+õ00000000014637400+õ00000000014739600+õ00000000000000000+õ00000000000000000+õ00000000001586800+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000030963800+õ00000001219826600õ000000000õ00000000000000000+õ00000000000000000+õ00000000000000000+õ000000000õ    õ00000001205189200+õ015504900õ015920000õ015920000õ";
        Cliente cliente = ClienteMock.completarInfoCliente();
        Cuenta cuenta = CuentaMock.completarInfoCuenta();

        Mockito.when(iatxSender.send(Matchers.argThat(new IatxMatcher(servicio, version)))).thenReturn(tramaResponse);

        DeudaPrestamoEntity deudaPrestamoEntity = cuotasPrestamoDao.consultarProximasCuotas(cliente, cuenta);

        Assert.assertNotNull(deudaPrestamoEntity);
    }

    /**
     * Consultar proximas cuotas iatx exception.
     *
     * @throws IatxException
     *             the iatx exception
     * @throws DAOException
     *             the DAO exception
     */
    @Ignore
    @Test
    public void consultarProximasCuotasIatxException() throws IatxException, DAOException {
        String servicio = "CNSPTMODEU";
        String version = "110";
        Cliente cliente = ClienteMock.completarInfoCliente();
        Cuenta cuenta = CuentaMock.completarInfoCuenta();

        Mockito.when(iatxSender.send(Matchers.argThat(new IatxMatcher(servicio, version))))
                .thenThrow(new IatxException("Error en Iatx."));

        DeudaPrestamoEntity deudaPrestamoEntity = cuotasPrestamoDao.consultarProximasCuotas(cliente, cuenta);

        Assert.assertNotNull(deudaPrestamoEntity);
    }

    /**
     * Consultar proximas cuotas error.
     *
     * @throws IatxException
     *             the iatx exception
     * @throws DAOException
     *             the DAO exception
     */
    @Ignore
    @Test
    public void consultarProximasCuotasError() throws IatxException, DAOException {
        String servicio = "CNSPTMODEU";
        String version = "110";
        String tramaResponse = "200000000000P04HTML0009900010300LMPN98  ********00581929000000102017032716341100000000IBF24679000000000000CNSPTMODEU1100000            00125398    00        00 000000000201703271634040000000000                            0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000DHõ0264000000000õARSõPESO ARGENTINO      õ00õ0001-01-01õ00õ0001-01-01õ014500000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000001290433800+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000001290433800+õ006õ2017-04-08õ00082õ014500000+õ00000000013784300+õ00000000015592700+õ00000000000000000+õ00000000000000000+õ00000000001643600+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000031020600+õ00000001290433800õ000000000õ00000000000000000+õ00000000000000000+õ00000000000000000+õ000000000õ    õ00000001276649500+õ015504900õ015920000õ015920000õ2017-05-08õ00083õ014500000+õ00000000013950800+õ00000000015426200+õ00000000000000000+õ00000000000000000+õ00000000001599400+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000030976400+õ00000001276649500õ000000000õ00000000000000000+õ00000000000000000+õ00000000000000000+õ000000000õ    õ00000001262698700+õ015504900õ015920000õ015920000õ2017-06-08õ00084õ014500000+õ00000000014119400+õ00000000015257600+õ00000000000000000+õ00000000000000000+õ00000000001621300+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000030998300+õ00000001262698700õ000000000õ00000000000000000+õ00000000000000000+õ00000000000000000+õ000000000õ    õ00000001248579300+õ015504900õ015920000õ015920000õ2017-07-08õ00085õ014500000+õ00000000014290000+õ00000000015087000+õ00000000000000000+õ00000000000000000+õ00000000001577500+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000030954500+õ00000001248579300õ000000000õ00000000000000000+õ00000000000000000+õ00000000000000000+õ000000000õ    õ00000001234289300+õ015504900õ015920000õ015920000õ2017-08-08õ00086õ014500000+õ00000000014462700+õ00000000014914300+õ00000000000000000+õ00000000000000000+õ00000000001598400+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000030975400+õ00000001234289300õ000000000õ00000000000000000+õ00000000000000000+õ00000000000000000+õ000000000õ    õ00000001219826600+õ015504900õ015920000õ015920000õ2017-09-08õ00087õ014500000+õ00000000014637400+õ00000000014739600+õ00000000000000000+õ00000000000000000+õ00000000001586800+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000000000000+õ00000000030963800+õ00000001219826600õ000000000õ00000000000000000+õ00000000000000000+õ00000000000000000+õ000000000õ    õ00000001205189200+õ015504900õ015920000õ015920000õ";
        Cliente cliente = ClienteMock.completarInfoCliente();
        Cuenta cuenta = CuentaMock.completarInfoCuenta();
        cuenta.setNroSucursal("TUFKS");

        Mockito.when(iatxSender.send(Matchers.argThat(new IatxMatcher(servicio, version)))).thenReturn(tramaResponse);

        DeudaPrestamoEntity deudaPrestamoEntity = cuotasPrestamoDao.consultarProximasCuotas(cliente, cuenta);

        Assert.assertNotNull(deudaPrestamoEntity);
    }

}
