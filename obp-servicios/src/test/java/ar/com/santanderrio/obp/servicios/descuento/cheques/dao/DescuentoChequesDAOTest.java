package ar.com.santanderrio.obp.servicios.descuento.cheques.dao;

import static org.mockito.Mockito.when;

import org.junit.Test;
import org.mockito.InjectMocks;
import org.mockito.Matchers;
import org.mockito.Mockito;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.support.AnnotationConfigContextLoader;

import com.google.gson.Gson;

import ar.com.santanderrio.obp.base.dao.DAOException;
import ar.com.santanderrio.obp.base.iatx.entities.IatxException;
import ar.com.santanderrio.obp.iatx.IatxBaseDAOTest;
import ar.com.santanderrio.obp.iatx.IatxMatcher;
import ar.com.santanderrio.obp.servicios.clientes.entities.Cliente;
import ar.com.santanderrio.obp.servicios.descuento.cheques.dao.impl.DescuentoChequesDAOImpl;
import ar.com.santanderrio.obp.servicios.descuento.cheques.entities.DescuentoChequesEntity;

@ContextConfiguration(loader = AnnotationConfigContextLoader.class, classes = {
		DescuentoChequesDAOTest.DescuentoChequesDAOTestConfiguration.class })
public class DescuentoChequesDAOTest extends IatxBaseDAOTest {

	@Autowired
	@InjectMocks
	DescuentoChequesDAO descuento;

	@Configuration
	public static class DescuentoChequesDAOTestConfiguration {

		/**
		 * Simulacion cliente compra DAO.
		 *
		 * @return the simulacion cliente compra DAO
		 */
		@Bean
		public DescuentoChequesDAO simulacionClienteCompraDAO() {
			return new DescuentoChequesDAOImpl();
		}

	}

	@Test
	public void obtenerOperacionesTest() throws DAOException, IatxException {
		// Realiza simulación de venta (Banco Vende / Cliente Compra) de
		// dólares.
		String simcpvtacnResponse = "200000000000P04HTML0009900010303GSME08  ********00543346000000072017121311321700000000IBF0055U000000000000CNSLISTRA_1000000            03682408    00        00 011319268201712131132040000000000                            0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000DHõ1261500000000õSõ050õ0000130199õSõ000000000005056õ000000000005100õ02õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-12-06õ2017-12-07õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-12-07õ04õNõNõNõ0000130198õSõ000000000002479õ000000000002500õ02õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-30õ2017-12-07õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-12-07õ04õNõNõNõ0000130196õSõ000000000005380õ000000000005400õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-30õ2017-11-30õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-30õ04õNõNõNõ0000130195õSõ000000000003189õ000000000003200õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-30õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-30õ04õNõNõNõ0000130194õSõ000000000000498õ000000000000500õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-29õ2017-11-30õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-30õ04õNõNõNõ0000130190õSõ000000000001195õ000000000001200õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-29õ2017-11-29õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-29õ04õNõNõNõ0000130188õSõ000000000001101õ000000000001105õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-27õ2017-11-30õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-30õ04õNõNõNõ0000130187õSõ000000000000994õ000000000001000õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-27õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-27õ04õNõNõNõ0000130182õSõ000000000110797õ000000000111100õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130180õSõ000000000002127õ000000000002133õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130179õSõ000000000033243õ000000000033333õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130178õSõ000000000032102õ000000000032190õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130177õSõ000000000021621õ000000000021680õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130176õSõ000000000043481õ000000000043600õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130175õSõ000000000008783õ000000000008800õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130174õSõ000000000010102õ000000000010130õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130173õSõ000000000000998õ000000000001000õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130172õSõ000000000044378õ000000000044499õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130164õSõ000000000044180õ000000000044300õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130162õSõ000000000000002õ000000000000002õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130160õSõ000000000000001õ000000000000001õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130159õSõ000000000000001õ000000000000001õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130158õSõ000000000000001õ000000000000001õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130157õSõ000000000000001õ000000000000001õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130156õSõ000000000003989õ000000000004000õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130154õSõ000000000003989õ000000000004000õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130146õSõ000000000000999õ000000000001000õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130145õSõ000000000000998õ000000000001000õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130142õSõ000000000000349õ000000000000350õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130140õSõ000000000000299õ000000000000300õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130134õSõ000000000000050õ000000000000050õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130133õSõ000000000212778õ000000000213166õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130131õSõ000000000021361õ000000000021400õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130130õSõ000000000000170õ000000000000170õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130129õSõ000000000000120õ000000000000120õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130128õSõ000000000021294õ000000000021333õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130127õSõ000000000000309õ000000000000310õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130126õSõ000000000042032õ000000000042109õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130125õSõ000000000051927õ000000000052021õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130124õSõ000000000000439õ000000000000440õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130123õSõ000000000085244õ000000000085400õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130122õSõ000000000000539õ000000000000540õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130121õSõ000000000032042õ000000000032100õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130120õSõ000000000000449õ000000000000450õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130119õSõ000000000090734õ000000000090900õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130118õSõ000000000000304õ000000000000305õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130117õSõ000000000099718õ000000000099900õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130116õSõ000000000000299õ000000000000300õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130115õSõ000000000077488õ000000000077700õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130114õSõ000000000000200õ000000000000200õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ";
		when(iatxSender.send(Matchers.argThat(new IatxMatcher("CNSLISTRA_", "100")))).thenReturn(simcpvtacnResponse);

		Cliente cliente = new Cliente();

		DescuentoChequesEntity simulacionClienteCompraEntity = descuento.obtenerOperaciones("", cliente, true, null);
		Mockito.verify(iatxSender).send(Matchers.argThat(new IatxMatcher("CNSLISTRA_", "100")));

	}
	
	@Test
	public void obtenerOperacionesNoPrecargadasTest() throws DAOException, IatxException {
		// Realiza simulación de venta (Banco Vende / Cliente Compra) de
		// dólares.
		String simcpvtacnResponse = "200000000000P04HTML0009900010303GSME08  ********00543346000000072017121311321700000000IBF0055U000000000000CNSLISTRA_1000000            03682408    00        00 011319268201712131132040000000000                            0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000DHõ1261500000000õSõ050õ0000130199õSõ000000000005056õ000000000005100õ02õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-12-06õ2017-12-07õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-12-07õ04õNõNõNõ0000130198õSõ000000000002479õ000000000002500õ02õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-30õ2017-12-07õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-12-07õ04õNõNõNõ0000130196õSõ000000000005380õ000000000005400õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-30õ2017-11-30õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-30õ04õNõNõNõ0000130195õSõ000000000003189õ000000000003200õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-30õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-30õ04õNõNõNõ0000130194õSõ000000000000498õ000000000000500õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-29õ2017-11-30õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-30õ04õNõNõNõ0000130190õSõ000000000001195õ000000000001200õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-29õ2017-11-29õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-29õ04õNõNõNõ0000130188õSõ000000000001101õ000000000001105õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-27õ2017-11-30õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-30õ04õNõNõNõ0000130187õSõ000000000000994õ000000000001000õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-27õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-27õ04õNõNõNõ0000130182õSõ000000000110797õ000000000111100õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130180õSõ000000000002127õ000000000002133õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130179õSõ000000000033243õ000000000033333õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130178õSõ000000000032102õ000000000032190õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130177õSõ000000000021621õ000000000021680õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130176õSõ000000000043481õ000000000043600õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130175õSõ000000000008783õ000000000008800õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130174õSõ000000000010102õ000000000010130õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130173õSõ000000000000998õ000000000001000õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130172õSõ000000000044378õ000000000044499õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130164õSõ000000000044180õ000000000044300õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130162õSõ000000000000002õ000000000000002õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130160õSõ000000000000001õ000000000000001õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130159õSõ000000000000001õ000000000000001õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130158õSõ000000000000001õ000000000000001õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130157õSõ000000000000001õ000000000000001õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130156õSõ000000000003989õ000000000004000õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130154õSõ000000000003989õ000000000004000õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130146õSõ000000000000999õ000000000001000õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130145õSõ000000000000998õ000000000001000õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130142õSõ000000000000349õ000000000000350õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130140õSõ000000000000299õ000000000000300õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130134õSõ000000000000050õ000000000000050õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130133õSõ000000000212778õ000000000213166õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130131õSõ000000000021361õ000000000021400õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130130õSõ000000000000170õ000000000000170õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130129õSõ000000000000120õ000000000000120õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130128õSõ000000000021294õ000000000021333õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130127õSõ000000000000309õ000000000000310õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130126õSõ000000000042032õ000000000042109õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130125õSõ000000000051927õ000000000052021õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130124õSõ000000000000439õ000000000000440õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130123õSõ000000000085244õ000000000085400õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130122õSõ000000000000539õ000000000000540õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130121õSõ000000000032042õ000000000032100õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130120õSõ000000000000449õ000000000000450õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130119õSõ000000000090734õ000000000090900õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130118õSõ000000000000304õ000000000000305õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130117õSõ000000000099718õ000000000099900õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130116õSõ000000000000299õ000000000000300õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130115õSõ000000000077488õ000000000077700õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ0000130114õSõ000000000000200õ000000000000200õ01õ000000000000000õ00õ03õPRECARGA                                          õHOMEBANKõ2017-11-21õ          õINNAMORATO                    õBAUDILIO MANSSUR              õNõ00022792232õI  õ2017-11-21õ04õNõNõNõ";
		when(iatxSender.send(Matchers.argThat(new IatxMatcher("CNSLISTRA_", "100")))).thenReturn(simcpvtacnResponse);

		Cliente cliente = new Cliente();

		DescuentoChequesEntity simulacionClienteCompraEntity = descuento.obtenerOperaciones("", cliente, false, null);
		Mockito.verify(iatxSender).send(Matchers.argThat(new IatxMatcher("CNSLISTRA_", "100")));

	}
	
	@Test
	public void obtenerOperacionesConFiltroTest() throws DAOException, IatxException {
		// Realiza simulación de venta (Banco Vende / Cliente Compra) de
		// dólares.
		String simcpvtacnResponse ="200000000000P04HTML0009900010304ALNJ54  ********00460791000000142018031210204000000000IBF001QQ000000000000CNSLISTRA_1000000            04013954    00        00 010212223201803121020240000000000                            0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000DHõ0026700000000õNõ001õ0000000303õSõ000000000032955õ000000000033300õ01õ000000000000000õ00õ15õACREDITADA                                        õUSUARIO õ2012-08-17õ          õBUSLJE                        õDARIO RODOLFO                 õNõ00028536389õI  õ2012-08-17õ22õNõNõNõ";
		when(iatxSender.send(Matchers.argThat(new IatxMatcher("CNSLISTRA_", "100")))).thenReturn(simcpvtacnResponse);

		Cliente cliente = new Cliente();

		DescuentoChequesEntity simulacionClienteCompraEntity = descuento.obtenerOperaciones("23452345", cliente, true, "04");
		Gson gson = new Gson();
		String valor = gson.toJson(simulacionClienteCompraEntity);
		Mockito.verify(iatxSender).send(Matchers.argThat(new IatxMatcher("CNSLISTRA_", "100")));
	}
	
	@Test
	public void obtenerOperacionesConFiltro2Test() throws DAOException, IatxException {
		// Realiza simulación de venta (Banco Vende / Cliente Compra) de
		// dólares.
		String simcpvtacnResponse ="200000000000P04HTML0009900010302DORJ76  ********00122367000000122018052811525800000000IBF0042G000000000000CNSLISTRA_1000000            02347976    00        00 011515069201805281152390000000000                            0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000DHõ0354300000000õNõ014õ0000130321õSõ000000000198787õ000000000200000õ01õ000000000000000õ00õ02õACEPTADA                                          õHOMEBANKõ2018-05-23õ          õQUAGLIAROLI                   õSERGIO ZENOBIO AYAX           õNõ00013741743õI  õ2018-05-23õ04õNõNõNõ0000130320õSõ000000000198787õ000000000200000õ01õ000000000000000õ00õ02õACEPTADA                                          õHOMEBANKõ2018-05-23õ          õQUAGLIAROLI                   õSERGIO ZENOBIO AYAX           õNõ00013741743õI  õ2018-05-23õ04õNõNõNõ0000130319õSõ000000000198787õ000000000200000õ01õ000000000010000õ01õ02õACEPTADA                                          õHOMEBANKõ2018-05-23õ          õQUAGLIAROLI                   õSERGIO ZENOBIO AYAX           õNõ00013741743õI  õ2018-05-23õ04õNõNõNõ0000130318õSõ000000000028098õ000000000033300õ01õ000000000000000õ00õ02õACEPTADA                                          õHOMEBANKõ2018-05-23õ          õQUAGLIAROLI                   õSERGIO ZENOBIO AYAX           õNõ00013741743õI  õ2018-05-23õ04õNõNõNõ0000130317õSõ000000000094196õ000000000100005õ01õ000000000000000õ00õ02õACEPTADA                                          õHOMEBANKõ2018-05-23õ          õQUAGLIAROLI                   õSERGIO ZENOBIO AYAX           õNõ00013741743õI  õ2018-05-23õ04õNõNõNõ0000130316õSõ000000000094196õ000000000100005õ01õ000000000000000õ00õ02õACEPTADA                                          õHOMEBANKõ2018-05-23õ          õQUAGLIAROLI                   õSERGIO ZENOBIO AYAX           õNõ00013741743õI  õ2018-05-23õ04õNõNõNõ0000130315õSõ000000000094196õ000000000100005õ01õ000000000000000õ00õ02õACEPTADA                                          õHOMEBANKõ2018-05-23õ          õQUAGLIAROLI                   õSERGIO ZENOBIO AYAX           õNõ00013741743õI  õ2018-05-23õ04õNõNõNõ0000130314õSõ000000000004923õ000000000010005õ01õ000000000000000õ00õ19õRECHAZADA SIMULACION                              õHOMEBANKõ2018-05-23õ          õQUAGLIAROLI                   õSERGIO ZENOBIO AYAX           õNõ00013741743õI  õ2018-05-23õ04õNõNõNõ0000130313õSõ000000000004943õ000000000010025õ01õ000000000000000õ00õ19õRECHAZADA SIMULACION                              õHOMEBANKõ2018-05-23õ          õQUAGLIAROLI                   õSERGIO ZENOBIO AYAX           õNõ00013741743õI  õ2018-05-23õ04õNõNõNõ0000130312õSõ000000000004943õ000000000010025õ01õ000000000000000õ00õ19õRECHAZADA SIMULACION                              õHOMEBANKõ2018-05-23õ          õQUAGLIAROLI                   õSERGIO ZENOBIO AYAX           õNõ00013741743õI  õ2018-05-23õ04õNõNõNõ0000130311õSõ000000000114065õ000000000120036õ01õ000000000000000õ00õ02õACEPTADA                                          õHOMEBANKõ2018-05-23õ          õQUAGLIAROLI                   õSERGIO ZENOBIO AYAX           õNõ00013741743õI  õ2018-05-23õ04õNõNõNõ0000130310õSõ000000000094291õ000000000100100õ01õ000000000000000õ00õ02õACEPTADA                                          õHOMEBANKõ2018-05-23õ          õQUAGLIAROLI                   õSERGIO ZENOBIO AYAX           õNõ00013741743õI  õ2018-05-23õ04õNõNõNõ0000130305õSõ000000000007258õ000000000012525õ01õ000000000000000õ00õ19õRECHAZADA SIMULACION                              õHOMEBANKõ2018-05-23õ          õQUAGLIAROLI                   õSERGIO ZENOBIO AYAX           õNõ00013741743õI  õ2018-05-23õ04õNõNõNõ0000130304õSõ000000000007258õ000000000012525õ01õ000000000000000õ00õ19õRECHAZADA SIMULACION                              õHOMEBANKõ2018-05-23õ          õQUAGLIAROLI                   õSERGIO ZENOBIO AYAX           õNõ00013741743õI  õ2018-05-23õ04õNõNõNõ";
		when(iatxSender.send(Matchers.argThat(new IatxMatcher("CNSLISTRA_", "100")))).thenReturn(simcpvtacnResponse);

		Cliente cliente = new Cliente();

		DescuentoChequesEntity simulacionClienteCompraEntity = descuento.obtenerOperaciones("23452345", cliente, true, "04");
		Gson gson = new Gson();
		String valor = gson.toJson(simulacionClienteCompraEntity);
		Mockito.verify(iatxSender).send(Matchers.argThat(new IatxMatcher("CNSLISTRA_", "100")));
	}
	
	@Test(expected=DAOException.class)
	public void obtenerOperacionesNoPrecargadasExceptionTest() throws DAOException, IatxException {
		when(iatxSender.send(Matchers.argThat(new IatxMatcher("CNSLISTRA_", "100")))).thenThrow(new IatxException());
		descuento.obtenerOperaciones("", new Cliente(), false, null);
		Mockito.verify(iatxSender).send(Matchers.argThat(new IatxMatcher("CNSLISTRA_", "100")));

	}

}
